const {
    spawnSync
} = require("child_process");
const Promise = require('bluebird');

async function runCrawler(pkg) {
    console.log(`running crawler on \x1b[35m` + pkg + `\x1b[0m`);
    const crawler = spawnSync("node", ["related.js", pkg]);
    console.log(crawler.output.toString());
    return Promise.resolve();
}

async function main() {
    let appIds = ["com.dreamdroid.livedroid", "nl.negentwee", "md.simpals.md999", "com.arlabsmobile.altimeterfree", "dk.logisoft.aircontrol", "com.airbnb.android", "com.sand.airdroid", "com.Playrion.AirlinesManager2", "com.nexgen.airportcontrol", "com.underground.akinotor", "nl.NewNexus.Android.AnderZorg", "com.antutu.ABenchMark", "com.apple.android.music", "com.google.android.apps.authenticator2", "com.authy.authy", "de.autodoc.gmbh", "com.ing.mobile", "ru.belkacar.belkacar", "nl.rijksoverheid.mbb.pub", "com.bitstrips.imoji", "com.booking", "org.yoki.android.buienalarm", "com.flavionet.android.camera.pro", "com.google.android.GoogleCameraEng", "com.intsig.camscanner", "com.supercell.clashofclans", "com.cg.android.countdown", "com.riliclabs.countriesbeen", "com.glgjing.stark", "com.cpuid.cpu_z", "io.voodoo.crowdcity", "io.curio", "com.centuryegg.pdm", "com.carshering", "onemlab.deviceid", "nl.rijksoverheid.digid.pub", "com.discord", "com.google.android.diskusage", "com.google.android.apps.docs.editors.docs", "eu.dominos.offers", "video.reface.app", "com.mobile_infographics_tools.mydrive", "com.dev47apps.droidcam", "com.duapps.recorder", "com.google.earth", "com.dirgtrats.atcradar", "com.speedsoftware.explorer", "io.faceapp", "com.facebook.katana", "com.google.android.apps.nbu.files", "com.google.android.apps.adm", "org.mozilla.firefox", "com.google.android.apps.fitness", "info.updater.serviceshelp.serviceinfo.apps.playservies2018", "com.flightradar24free", "de.flixbus.app", "com.delphicoder.flud", "unfollowers.follow.unfollow", "free.balls3", "com.giphy.messenger", "com.google.android.apps.paidtasks", "com.google.android.apps.pdfviewer", "com.google.android.play.games", "com.google.android.apps.podcasts", "com.gopro.smarty", "com.eclipsim.gpsstatus2", "ru.habrahabr", "com.repsi.heartrate", "io.voodoo.holeio", "nl.dcentralize.beltegoed.hollandsnieuwe", "com.google.android.apps.chromecast.app", "com.teamviewer.host.market", "kr.co.manhole.hujicam", "com.steevsapps.idledaddy", "com.imgur.mobile", "mobi.charmer.quicksquarenew", "com.instagram.android", "com.csnbv.jouwloon", "com.perm.kate_new_6", "com.google.android.keep", "com.afklm.mobile.android.gomobile.klm", "com.linkedin.android", "de.onyxbits.listmyapps", "net.liveatc.liveatc_app", "com.leavjenn.longshot", "com.lufthansa.android.lufthansa", "com.mapswithme.maps.pro", "nl.marktplaats.android", "com.BlackGames.MathRiddles", "com.taxsee.taxsee", "com.mcdonalds.mobileapp", "com.google.tango.measure", "com.facebook.orca", "com.xiaomi.hm.health", "md.micb.mwb.prod", "com.mgoogle.android.gms", "nl.kpn.mijn", "ru.mt.mobilecabinet", "com.orange.myorange.omd", "com.pvh.mytommy", "com.netflix.mediaclient", "info.kfsoft.android.TrafficIndicator", "com.tanuj.nowplayinghistory", "com.imihov.nowplaying_list", "nl.ns.android.activity", "com.opera.browser", "nl.tls.ovchip", "com.paypal.android.p2pmobile", "com.google.android.apps.photos.scanner", "com.estsoft.picnic", "com.pinterest", "com.google.android.imaging.easel.service", "com.breel.wallpapers19", "com.playservices.playstore.version.update.playservciesinfo.playupdatechecker", "com.weberdo.apps.serviceinfo", "com.google.vr.apps.ornament.content.stickers.childish", "com.google.vr.apps.ornament.content.stickers.locomoji", "com.appkode.pobeda.aero", "jp.co.pointblur.android.app.quick", "nl.tpp.mobile.android", "com.maxmpz.audioplayer", "com.maxmpz.audioplayer.unlock", "com.riseupgames.proshot2", "com.playstation.remoteplay", "com.google.android.apps.recorder", "com.reddit.frontpage", "com.rescuetime.android", "com.restory.restory", "com.revolut.revolut", "com.trusty.ty.satellite", "com.digitalwellbeingexperiments.screenstopwatch", "com.shazam.android", "com.google.android.apps.docs.editors.sheets", "com.skype.raider", "com.t11.skyviewfree", "com.Slack", "com.snapchat.android", "com.niksoftware.snapseed", "com.google.android.accessibility.soundamplifier", "com.georgie.SoundWire", "com.ketchapp.spacefrontier", "com.bradleyjh.spacexnow", "org.zwanoo.android.speedtest", "com.spotify.music", "com.valvesoftware.android.steam.community", "com.valvesoftware.steamlink", "com.glitch.stitchandshare", "de.stocard.stocard", "com.lightx.storyz", "com.strava", "pdf.tap.scanner", "com.tarom.app.ro", "com.teamviewer.teamviewer.market.mobile", "org.telegram.messenger", "com.termux", "com.tplink.tether", "com.byteexperts.texteditor", "nu.theorieleren2", "com.todoist", "org.prowl.torque", "com.wi.verkeerswet_en", "com.pixelfederation.ts2", "com.mttnow.droid.transavia", "com.google.android.apps.translate", "devian.tubemate.v3", "free.vpn.unblock.proxy.turbovpn", "com.turkishairlines.mobile", "tv.twitch.android.app", "com.twitter.android", "com.ubercab", "com.Relmtech.RemotePaid", "com.viber.voip", "com.popularapp.videodownloaderforinstagram", "com.vkontakte.android", "org.videolan.vlc", "com.media.bestrecorder.audiorecorder", "com.waze", "com.whatsapp", "com.farproc.wifi.analyzer", "com.turkishairlines.ifeclient", "io.wifimap.wifimap", "com.vrem.wifianalyzer", "com.wolfram.android.alpha", "ru.yandex.disk", "ru.yandex.mail", "ru.yandex.yandexmaps", "ru.yandex.money", "ru.yandex.taxi", "quinnteq.yee", "ru.megafon.mlk", "ru.beeline.services", "ru.foodfox.client"];
    return Promise.map(appIds, appId => Promise.delay(Math.floor(Math.random() * Math.floor(5000) + 25000), runCrawler(appId)), {
        concurrency: 1
    });
}

main().then(r => console.log('DONE!'));